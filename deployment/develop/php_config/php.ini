memory_limit = 1024M
date.timezone = Asia/Taipei

; ===== OPcache 配置 =====
; 啟用 OPcache
opcache.enable=1
opcache.enable_cli=1

; 記憶體設定
opcache.memory_consumption=256
opcache.interned_strings_buffer=16
opcache.max_accelerated_files=20000

; 檔案相關設定 (生產環境優化)
opcache.revalidate_freq=300
opcache.validate_timestamps=0
opcache.save_comments=1
opcache.fast_shutdown=1

; 強化快取設定
opcache.file_cache_only=0
opcache.file_update_protection=2

; 生產環境註解：
; validate_timestamps=0：生產環境不檢查檔案變更，最大化效能
; revalidate_freq=60：開發環境可設為較小值，生產環境建議較大值

; ===== JIT 配置 =====
; 啟用 JIT 並設定緩衝區大小 (128MB)
opcache.jit_buffer_size=128M
; JIT 模式：tracing 模式，適合 Web 應用程式
opcache.jit=tracing
; JIT 熱點函數閾值
opcache.jit_hot_func=127
opcache.jit_hot_loop=64

; ===== 效能優化設定 =====
; 減少不必要的系統呼叫
opcache.use_cwd=1
opcache.validate_permission=0
opcache.validate_root=0

; 預載入優化 (可根據需要啟用)
; opcache.preload=/var/www/html/preload.php
; opcache.preload_user=www-data
